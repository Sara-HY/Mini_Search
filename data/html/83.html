<!DOCTYPE HTML>
<html>
<head>
<script id="allmobilize" charset="utf-8" src="http://a.yunshipei.com/geekcsdnnet/allmobilize.min.js"></script>
<link href="http://csdnimg.cn/public/favicon.ico" rel="SHORTCUT ICON" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>getAwesomeness()：编程资源大集合  - 极客头条  - CSDN.NET</title>

<!-- toolbar -->
<link rel="stylesheet" href="http://static.csdn.net/public/common/toolbar/css/index.css">
<script src="http://csdnimg.cn/public/common/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
<!-- //toolbar -->

<link href="http://csdnimg.cn/www/css/csdn_common.css" rel="stylesheet" type="text/css">
<link href="http://csdnimg.cn/public/themes/default/css/icon.css" rel="stylesheet" type="text/css">
<script src="http://cms.csdnimg.cn/socket.io/socket.io.js"></script>
<!--
	css/skins/default/content.css
-->
<link rel="stylesheet" type="text/css" href="/cache/10dd03eee0eddf92b7f29112bfc309101394092182.css" />
<!--
	js/jquery-1.4.2.min.js
-->
<script src="/cache/eb232248f431a6a295768980b518d38b1362722178.js"></script>

	<!--
	css/skins/default/box.css
-->
<link rel="stylesheet" type="text/css" href="/cache/78206934dfd2ae2eed460d8cd7aa28501381732669.css" />
	<!--
	js/news.js
-->
<script src="/cache/f6609f4a6707349865fbb32bb7822e2d1392019101.js"></script>

	<!--
	js/markdown.js
-->
<script src="/cache/9e2762d9c341d4159e1125f26a4892b81376878359.js"></script>
	<!--
	css/skins/default/markdown.css
-->
<link rel="stylesheet" type="text/css" href="/cache/43d66448c2d7565f37ddf8506ba396581382424720.css" />
	<script src="https://code.csdn.net/assets/application.js"></script>
	<!--
	css/skins/default/base.css
-->
<link rel="stylesheet" type="text/css" href="/cache/8046536c9ccc9226d3b544731e700a351382062562.css" />
</head>

<body >
<script type="text/javascript">
  var protocol = window.location.protocol;
  document.write('<script type="text/javascript" src="' +protocol+ '//csdnimg.cn/pubfooter/js/repoAddr2.js?v=' + Math.random() + '"></'+'script>');
</script>
 <!-- toolbar js -->
<script id="toolbar-tpl-scriptId" prod="" skin="black" src="http://static.csdn.net/public/common/toolbar/js/html.js" type="text/javascript"></script>
 <!-- //toolbar js --> 
<div class="mian clearfix">
	<div class="left fl">
		<div class="content comment_info">
			<ul class="list">
			  <li id="li_33160" onmouseover="show_caozuo(33160)" onmouseout="hide_caozuo(33160)">
			  
			  <div class="up_down"> 
			                    <a class="top like" title="顶"><span>2</span></a>
                            
                            </div>
					<div class="content_info">
						
						<!-- 编辑title与正常title -->
						<h4 id="title_33160">
															<a href="http://getawesomeness.com/" target="_blank" id="title_a_33160" onclick="update_click_num(33160);">getAwesomeness()：编程资源大集合</a>
																						<span id="domain_33160">(getawesomeness.com)</span>
													</h4>
						
						<!-- title url编辑层 -->
						<h4 id="title_input_33160" style="display: none;"><textarea name="title_33160" id="title_textarea_33160" cols="" rows="">getAwesomeness()：编程资源大集合</textarea></h4>
						<input type="hidden" id="url_a_33160" value="http://getawesomeness.com/">
						<h4 class="box_111" id="url_input_33160" style="display: none;">
						<textarea class="flat_bar" cols="" rows="" id="url_textarea_33160"></textarea>
						</h4>
						<!-- //编辑title与正常title -->
						
						<!-- 编辑删除 -->
												<!--// 编辑删除 -->
						
						<span class="meta">文章由<a href="/user/qiansg123" class="name user_name">qiansg123</a>于4小时前分享 </span> <a class="comment">评论（0）</a>	
						<script type="text/javascript" charset="utf-8">
						(function(){
						  var _w = 16 , _h = 16;
						  var param = {
						    url:location.href,
						    type:'3',
						    count:'', /**是否显示分享数，1显示(可选)*/
						    appkey:'', /**您申请的应用appkey,显示分享来源(可选)*/
						    title:$('#title_a_33160').html(), /**分享的文字内容(可选，默认为所在页面的title)*/
						    pic:'', /**分享图片的路径(可选)*/
						    ralateUid:'', /**关联用户的UID，分享微博会@该用户(可选)*/
							language:'zh_cn', /**设置语言，zh_cn|zh_tw(可选)*/
						    rnd:new Date().valueOf()
						  }
						  var temp = [];
						  for( var p in param ){
						    temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )
						  }
						  document.write('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&') + '" width="'+ _w+'" height="'+_h+'"></iframe>')
						})()
						</script>
<!-- 						<a href="#" class="weibo" title="分享到新浪微博">分享</a> -->
						
						<!-- tag层 -->
							<div class="g_tag" id="tag_33160">
									                         	<a href="http://www.csdn.net/tag/编程/news">编程</a>
		                    		                         	<a href="http://www.csdn.net/tag/程序员/news">程序员</a>
		                    		                    </div>
		                <!-- tag编辑层 -->  
		                <input type="hidden" id="tag_a_33160" value="编程,程序员">
						<h4 class="box_111" id="tag_input_33160" style="display: none;">
						<textarea class="flat_bar" cols="" rows="" id="tag_textarea_33160"></textarea></br>
                        <span class="meta">文章关键词（最多填写10个关键词，多个关键词请用英文逗号（,）分开） </span>
                        <input name="" type="button" value="保存" onclick="edit_bc(33160,'detail');"><input name="" type="button" value="取消" onclick="edit_qx(33160)">
                        </h4>
                        <!-- //tag编辑层 -->
					</div>

				</li>
			</ul>
			
	<!-- 添加编辑信息 -->
	  <span id="description_show_place_org" style="display:none;"></span>
      <div class="supplement" id="description_show_place" style="display:none;"></div>
      <div class="replenish clearfix">
     
    			</div>
			
	<!-- //添加编辑信息 -->
      <div></div>
       <div id="preview_wraper" >
        <div class="arrow"></div>
        <div id="preview"></div>
       </div>
       
		</div>
		<div id="comments" class="csdn_comments" style="width:98%;margin-bottom: 30px;"></div>
		<script src="http://ptcms.csdn.net/comment/js/comments.js" type="text/javascript"></script>
		<script src="http://csdnimg.cn/atsuggest/comment_atsuggest.js" type="text/javascript"></script>
		<!--script src="js/https://passport.csdn.net/scripts/login.js?v=1.2" type="text/javascript"></script-->
		<script type="text/javascript">
		    //var path = location.protocol +"//"+ location.host+"/comments/";                 //本地测试需要配置一个csdn.net的子域名，以便登录，例:http://comments.csdn.net
		    var path = "http://ptcms.csdn.net/comment";
		    csdn.comments = new csdn.comments({
		        id:"comments",                                                                  //容器ID
		        path:path,
		        datapath:"http://ptcms.csdn.net",                                          //数据接口host
		        cssUrl:path+"/css/comments.css",                                                 //css地址
		        //loginUrl:path+"/js/login.js",                  //login.js地址
		        loginUrl:"https://passport.csdn.net/content/loginbox/login.js",
		        articleURL:"http://geek.csdn.net/news/detail/33160",
		        title:"getAwesomeness%28%29%EF%BC%9A%E7%BC%96%E7%A8%8B%E8%B5%84%E6%BA%90%E5%A4%A7%E9%9B%86%E5%90%88",
		        md5:"http://static.blog.csdn.net/scripts/md5.js",                               //用于计算用户头像的md5.js地址
		        componentsUrl:path+"/js/componet.js",              //CSDN通用组件地址
		        toolkitUrl:path+"/js/toolkit.js",                  //CSDN工具包地址
		        tab:{                                                                           //【通用组件】tab
		            id:"csdnTab",                                                               //容器ID
		            highlight:"hover"                                                           //表示当前选择的CSS样式名
		        },
		        pagination:{                                                                    //【通用组件】AJAX分页组件
		            pagesize:50,                                                                //每页多少条数据
		            showpages:10                                                                //显示多少页
		        },
                oncountchange:function(count){                                                  //评论数chagnge回调
                    var el = document.getElementById('remark_count1');
                    if(el){el.innerHTML=count}
                }
		    });
		</script>
	</div>
	<div class="right fl">
			    <div class="hot_tags">
        	<h3>热门Tag</h3>

        </div>
        <div class="tags_nam  clearfix" >
                        <a href="http://www.csdn.net/tag/程序员/news">程序员</a>
                        <a href="http://www.csdn.net/tag/java/news">Java</a>
                        <a href="http://www.csdn.net/tag/javascript/news">JavaScript</a>
                        <a href="http://www.csdn.net/tag/编程/news">编程</a>
                        <a href="http://www.csdn.net/tag/android/news">Android</a>
                        <a href="http://www.csdn.net/tag/html5/news">HTML5</a>
                        <a href="http://www.csdn.net/tag/jquery/news">jQuery</a>
                        <a href="http://www.csdn.net/tag/开源/news">开源</a>
                        <a href="http://www.csdn.net/tag/css3/news">CSS3</a>
                        <a href="http://www.csdn.net/tag/应用/news">应用</a>
                        <a href="http://www.csdn.net/tag/技术/news">技术</a>
                        <a href="http://www.csdn.net/tag/动画/news">动画</a>
                        <a href="http://www.csdn.net/tag/linux/news">Linux</a>
                        <a href="http://www.csdn.net/tag/极客标签/news">极客标签</a>
                        <a href="http://www.csdn.net/tag/google/news">Google</a>
                        <a href="http://www.csdn.net/tag/css/news">CSS</a>
                        <a href="http://www.csdn.net/tag/python/news">Python</a>
                        <a href="http://www.csdn.net/tag/gbtags/news">gbtags</a>
                        <a href="http://www.csdn.net/tag/ios/news">iOS</a>
                        <a href="http://www.csdn.net/tag/大数据/news">大数据</a>
                        <a href="http://www.csdn.net/tag/web/news">Web</a>
                        <a href="http://www.csdn.net/tag/设计/news">设计</a>
                        <a href="http://www.csdn.net/tag/编程语言/news">编程语言</a>
                        <a href="http://www.csdn.net/tag/算法/news">算法</a>
                        <a href="http://www.csdn.net/tag/开发者/news">开发者</a>
                        <a href="http://www.csdn.net/tag/框架/news">框架</a>
                        <a href="http://www.csdn.net/tag/微软/news">微软</a>
                        <a href="http://www.csdn.net/tag/插件/news">插件</a>
                        <a href="http://www.csdn.net/tag/发布/news">发布</a>
                        <a href="http://www.csdn.net/tag/php/news">PHP</a>
                </div>
	<div class="experts_top">
		<h3>
		头条主编<span>贡献榜</span>
						<a href="https://passport.csdn.net/account/login?from=http://geek.csdn.net//apply_expert/apply" class="apply">主编申请</a>
				</h3>
		<ul>
					<li>
				<a href="/user/liujiangce">刘江</a>
			</li>
					<li>
				<a href="/user/u011106205">黄利民</a>
			</li>
					<li>
				<a href="/user/qiansg123">钱曙光</a>
			</li>
					<li>
				<a href="/user/u011306535">外刊IT评论</a>
			</li>
					<li>
				<a href="/user/yxy1992_123">杨先亚</a>
			</li>
					<li>
				<a href="/user/jjfat">李嘉</a>
			</li>
					<li>
				<a href="/user/jiangtao">蒋涛CSDN</a>
			</li>
					<li>
				<a href="/user/linxiyu52">魏兵</a>
			</li>
					<li>
				<a href="/user/u011110579">唐尤华</a>
			</li>
					<li>
				<a href="/user/mengyidan">张红月</a>
			</li>
					<li>
				<a href="/user/tangxiaoyin">唐小引</a>
			</li>
					<li>
				<a href="/user/ifeve">方腾飞</a>
			</li>
					<li>
				<a href="/user/pike0002">皮可</a>
			</li>
					<li>
				<a href="/user/c1990h">陈明</a>
			</li>
					<li>
				<a href="/user/rnifeasy">夏梦竹</a>
			</li>
					<li>
				<a href="/user/happytofly">周建丁</a>
			</li>
					<li>
				<a href="/user/spidercoco">黄经业</a>
			</li>
					<li>
				<a href="/user/dockerone">DockerOne</a>
			</li>
					<li>
				<a href="/user/gmszone">黄峰达</a>
			</li>
					<li>
				<a href="/user/zhagyong">张勇</a>
			</li>
					<li>
				<a href="/user/u011109959">极客范团队</a>
			</li>
					<li>
				<a href="/user/zuoninger">郭志敏</a>
			</li>
					<li>
				<a href="/user/tuhaihe">王殿进</a>
			</li>
					<li>
				<a href="/user/cxygo">IT江湖</a>
			</li>
					<li>
				<a href="/user/karamos">魏伟</a>
			</li>
					<li>
				<a href="/user/u010415101">网路冷眼</a>
			</li>
					<li>
				<a href="/user/w397090770">吴阳平</a>
			</li>
					<li>
				<a href="/user/zhong930">仲浩</a>
			</li>
					<li>
				<a href="/user/geekplayer">geekplayer</a>
			</li>
					<li>
				<a href="/user/liuzhuoran1110">卓然</a>
			</li>
				</ul>
	</div>
	<div class="about_faq">
		<ul>
			<li><a href="http://geek.csdn.net/news/detail/38" class="about">关于极客头条</a></li>
			<li><a href="http://geek.csdn.net/news/detail/38">常见问题</a></li>
		</ul>
	</div>
</div>

<script>
function v2(){
	$.get("/hackernewsv2/taste",function(data){
		if(data.succ == 1){
			window.location.href="http://geek.csdn.net/";
		}else{
			alert(data.msg);
			return false;
		}
	});
}
</script></div>

<!-- POPUP link-->
<div class='modal hide fade' id='link_add' >

<div class='modal-header'>

<div aria-hidden='true' class='close' data-dismiss='modal'></div>

<h3>插入链接</h3>

</div>

<div class='modal-body'>

<ul>

<li>

<input name='text' placeholder='链接文本' title='链接文本(text)' type='text'>

</li>

<li>

<input name='href' placeholder='链接地址' title='链接地址(href)' type='text'>

<div id='link_error'></div>

</li>

<li>

<input name='title' placeholder='链接提示' title='链接提示(title)' type='text'>

</li>

</ul>

</div>

<div class='modal-footer'>

<div aria-hidden='true' class='btn' data-dismiss='modal'>关闭</div>

<div class='btn btn-success addLink' data-dismiss='modal'>确定</div>

</div>

</div>

<!-- img upload -->

<div  id='img_upload' aria-hidden='true' aria-labelledby='myModalLabel' class='modal hide fade' role='dialog' tabindex='-1'>

<div class='modal-header'>

<div aria-hidden='true' class='close' data-dismiss='modal'></div>

<h3 id='myModalLabel'>选择图片</h3>

</div>

<div class='modal-body'>

<div class='tabbable'>

<ul class='nav nav-tabs'>

<li class='active' type='local'>

<a href="#imgtab1" data-toggle="tab">本地上传</a>

</li>

<!-- li type='repo'>

<a href="/pliver/md_xienn/select_pictures" data-remote="true" data-target="#imgtab2" data-toggle="tab">选择已有图片</a>

</li-->

<li type='web'>

<a href="#imgtab3" data-toggle="tab">URL上传</a>

</li>

</ul>

<div class='tab-content upload_img_content'>

<div class='tab-pane active' id='imgtab1' style='text-align: center;'>

<dl class='upload_img_align'>

<dt id='img_preview'>

<img id='imghead' src=''>

</dt>

<dd class='inputfile'>

<input accept="image/*" id="file_datafile" name="file" type="file" />

<div class='btn'>选择上传图片</div>

</dd>

<dd>

文件最大5 MB

&nbsp;&nbsp;

<span id='upload_status'></span>

</dd>

</dl>

</div>

<div class='tab-pane' id='imgtab2'></div>

<div class='tab-pane' id='imgtab3' style='text-align: center;'>

<input class="upload_img_input" id="imgtab3_url" name="imgtab3_url" placeholder="输入URL" type="text" />

<div id='imgtab3_error' style='color: #f00;'></div>

</div>

</div>

</div>

</div>

<div class='modal-footer'>

<div aria-hidden='true' class='btn' data-dismiss='modal'>关闭</div>

<div class='btn btn-success addToEdit'>确定</div>

</div>

</div>

<!-- markdown help -->

<div id='markdown_help' class='modal hide fade'>

<div class='modal-header'>

<div aria-hidden='true' class='close' data-dismiss='modal'></div>

<h3>Markdown编辑入门</h3>

</div>

<div class='modal-body'>

<ul class="markdown_help">

  <li><a>区块元素</a>

    <ul>

      <li><a>段落和换行</a>

        <ul>

          <p>一个段落是由一个以上相连接的行句组成，而一个以上的空行则会切分出不同的段落。</p>

          <p>如果你想要插入换行符的话，在行尾加上两个以上的空白，然后按Enter。 </p>

        </ul>

      </li>

      <li><a>标题</a>

        <ul>

          <p>Markdown支持两种标题的语法。wiki 编辑器使用 &ldquo;atx&rsquo;-style 的标题. Atx形式是在行首插入1到6个 <code>#</code> 对应1到6个级别的标题。 例如: <code># Header 1</code>, <code>## Header 2</code> 和 <code>### Header 3</code> 将以此递减. 你也可以在行尾加上<code>#</code>。</p>

        </ul>

      </li>

      <li><a>区块引言 Blockquotes</a>

        <ul>

          <p>Markdown使用email形式的区块引言，每行的最前面加上<code>&gt;</code>. Markdown也允许你只在整个段落的第一行最前面加上<code>&gt;</code>。</p>

        </ul>

      </li>

      <li><a>列表</a>

        <ul>

          <p>Markdown支持有序清单和无序清单。 创建一个有序列表只需要在每一行前加上一个数字和英文句点。 如果创建一个无序列表, 你可以在每一行前加上 <code>*</code>, <code>+</code> 或 <code>-</code>.</p>

          列表项可以包含多个段落，每个项目下的段落都必须缩排 4 个空格或是 1 个 tab 。

          </p>

        </ul>

      </li>

      <li><a>代码块</a>

        <ul>

          <p>和程序相关的写作或是标签语言原始码通常会有已经排版好的代码区块，通常这些区块我们并不希望它以一般段落文件的方式去排版，而是照原来的样子显示。要在 Markdown 中建立代码区块很简单，只要简单地缩进 4 个空格或是 1 个 tab 就可以 。<br>

            需要高亮显示的语言代码块，可以使用<code>```语言类型</code>来标明</code>例如<br>

          <pre>```c++<br>#include "stdlib.h"<br>int main()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;return;<br>}<br>```</pre>

          <br>

          可以显示为

          <div class="highlight">

            <pre><span class="cp">#include "stdlib.h"</span> <br><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span><br><span class="p">{</span> <br><span class="k">&nbsp;&nbsp;&nbsp;&nbsp;return</span><span class="p">;</span> <br><span class="p">}</span> </pre>

          </div>

          <br>

          Code会自动感知语言，<code>```</code>后面可以不指定语言。

          </p>

        </ul>

      </li>

      <li><a>分隔线</a>

        <ul>

          <p>你可以在一行中用三个以上的星号、减号、下划线来建立一个分隔线，行内不能有其他东西。你也可以在星号或是减号中间插入空格。</p>

        </ul>

      </li>

    </ul>

  <li><a>区段元素</a>

    <ul>

      <li><a>链接</a>

        <ul>

          <p>Markdown 支持两种形式的链接语法: <strong>行内式</strong> 和 <strong>参考式</strong>。不管是哪一种，链接文字都是用 [方括号] 来标记. 例如，如果要链接显示为 &ldquo;Code&rdquo;, 就直接写 <code>[Code]</code>.</p>

          <p>要建立一个行内式的链接，只要在方块括号后面紧接着圆括号并插入网址链接即可 (例如： <code>[Code](http://code.csdn.net/)</code>)。 如果你是要链接到同样主机的资源，你可以使用相对路径。</p>

          <p>参考式链接需要用两个方括号来标示<code>[my internal link][Code]</code> 将会链接到一个参考链接 <code>Code</code>。</p>

          <p>参考式连接的声明方式为中括号后跟冒号，例如<code>[Code]: http://code.csdn.net</code></p>

        </ul>

      </li>

      <li><a>强调</a>

        <ul>

          <p>Markdown 使用星号 (<code>*</code>) 和下划线 (<code>_</code>) 作为标记强调字词的符号。 被单个星号 (<code>*</code>) 或下划线 (<code>_</code>)包围的文字通常显示为斜体， 被双星号 (<code>**</code>) 或双下划线(<code>__</code>) 包围的文字则显示为粗体。你可以随便用你喜欢的样式，唯一的限制是，你用什么符号开启标签，就要用什么符号结束。</p>

          <p>例如：, <code>**My double emphasis text**</code> 显示为 <strong>My double emphasis text</strong>, <code>*My single emphasis text*</code> 显示为 <em>My single emphasis text</em>。</p>

        </ul>

      </li>

      <li><a>代码</a>

        <ul>

          <p>如果要标记一小段行内代码，你可以用反引号把它包起来 (<code>`</code>). Markdown 将把 <code>`myFunction`</code> 转成 <code>myFunction</code>。</p>

        </ul>

      </li>

      <li><a>图片</a>

        <ul>

          <p>Markdown 使用一种和链接很相似的语法来标记图片。用法为： 1 个惊叹号(<code>!</code>)， 接着一个方括号，里面放上图片的替代文字，接着一个普通括号，里面放上图片的网址. 例如, 你想使用链接图片<code>http://code.csdn.net/unicorn.png</code> 并显示链接为<code>My Unicorn</code>, 可以这样写 <code>![My Unicorn](http://code.csdn.net/unicorn.png)</code>。</p>

        </ul>

      </li>

    </ul>

  <li><a>其它</a>

    <ul>

      <li><a>自动链接</a>

        <ul>

          <p>Markdown 支持以比较简短的自动链接形式来处理网址和电子邮件信箱，只要尖括号<code>&lt;</code> <code>&gt;</code> 括起来， Markdown 就会自动把它转成链接。一般网址的链接文字就和链接地址一样，例如： 例如： 链接<a href="javascript:void(0);">https://code.csdn.net/</a> 可以写成 <code>&lt;https://code.csdn.net/&gt;</code>。</p>

        </ul>

      </li>

      <li><a>反斜杠</a>

        <ul>

          <p> Markdown 可以利用反斜杠来插入一些在语法中有其它意义的符号，例如：如果你想要用星号加在文字旁边的方式来做出强调效果, 而不是显示为标题, 你可以在星号的前面加上反斜杠 (<code>\\＊</code>)。</p>

        </ul>

      </li>

    </ul>

  </li>

</ul>



<script>

  $('.markdown_help li:first-child').addClass('active');

  $('.markdown_help li').click(function(){

      $(this).addClass('active').siblings().removeClass('active');

  });

</script>

</div>

<div class='modal-footer'>

<div aria-hidden='true' class='btn' data-dismiss='modal'>关闭</div>

</div>

</div>

<script>

     

    $('.addLink').click(function() {

        var href = $('#link_add input[name="href"]').val();

    

        // 校验 href

        var reg = /([\w-]+\.)+[\w-]+(\/[\w\- .\/?%&=]*)?/;

        if (reg.test(href)) {

            if (href.indexOf("://") < 0) {

                href = "http://" + href

            }

        } else {

            $("#link_error").html("链接格式不正确");

            return false;

        }

    

        var text = $('#link_add input[name="text"]').val();

        var title = $('#link_add input[name="title"]').val();

    

        if (!text) text = href;

    

        if (title) {

            editor.replaceSelection('[' + text + '](' + href + ' "' + title + '")');

        } else {

            editor.replaceSelection('[' + text + '](' + href + ')');

        }

        var head = editor.getCursor("head");

        editor.setSelection(head, head);

        editor.focus();

        $("#link_error").html("");

    });



/* img upload*/    

//<![CDATA[

    //上传图片事件

    $(function () {

      var upload = function(data){

        var jqXHR = data.submit()

            .success(function (result, textStatus, jqXHR) {

              if(result.success){

                $("#img_upload").modal('hide');

                $('#imghead').attr('src', '');

                editor.replaceSelection('![' + result.url + '](' +  result.url + ')');

                editor.focus();

                $('#upload_status').html('');

              }else{

                $('#upload_status').html(result.errors.attachment);

              }

            });

      }

    

      //upload pic

      $('#file_datafile').fileupload({
        dataType: 'json',

        url: "/index.php/service/picture/upload_file",

        add: function (e, data) {

          $('.modal-footer .addToEdit').unbind('click');

          previewImage(data);

          $(".modal-footer .addToEdit").click(function(){

            var active_lab = $("#img_upload .tabbable ul.nav.nav-tabs li.active").attr('type');

            if(active_lab == "local"){

              $('#upload_status').html('正在上传...')

              upload(data);

            }

          });

        }

      });

    });

    

    $(".modal-footer .addToEdit").click(function(){

      var active_lab = $("#img_upload .tabbable ul.nav.nav-tabs li.active").attr('type');

      if(active_lab == "repo"){

        select_pic();

      }else if(active_lab == "web") {

        addURL();

      } 

    });

    

    //预览图片

    function previewImage(file) {

      var MAXWIDTH = 200;

      var MAXHEIGHT = 200;

      var div = document.getElementById('img_preview');

      if (file.files && file.files[0]) {

        div.innerHTML = '<img id=imghead>';

        var img = document.getElementById('imghead');

        img.onload = function() {

          var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);

          img.height = rect.height;

          img.width = rect.width;

          img.style.marginTop = rect.top + 'px';

        }

        var reader = new FileReader();

        reader.onload = function(evt) {

          img.src = evt.target.result;

        }

        reader.readAsDataURL(file.files[0]);

      } else {

        var sFilter = 'filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="';

        file.select();

        var src = document.selection.createRange().text;

        div.innerHTML = '<img id=imghead>';

        var img = document.getElementById('imghead');

        img.filters.item('DXImageTransform.Microsoft.AlphaImageLoader').src = src;

        var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);

        status = ('rect:' + rect.top + ',' + rect.left + ',' + rect.width + ',' + rect.height);

        div.innerHTML = "<div id=divhead style='width:" + rect.width + "px;height:" + rect.height + "px;margin-top:" + rect.top + "px;margin-left:" + rect.left + "px;" + sFilter + src + "\"'></div>";

      }

    }

    

    function clacImgZoomParam(maxWidth, maxHeight, width, height) {

      var param = {

        top: 0,

        left: 0,

        width: width,

        height: height

      };

      if (width > maxWidth || height > maxHeight) {

        rateWidth = width / maxWidth;

        rateHeight = height / maxHeight;

    

        if (rateWidth > rateHeight) {

          param.width = maxWidth;

          param.height = Math.round(height / rateWidth);

        } else {

          param.width = Math.round(width / rateHeight);

          param.height = maxHeight;

        }

      }

    

      param.left = Math.round((maxWidth - param.width) / 2);

      param.top = Math.round((maxHeight - param.height) / 2);

      return param;

    }

    

    //Url上传

    function addURL(){

      var url = $("#imgtab3_url").val();

      var reg = /([\w-]+\.)+[\w-]+(\/[\w\- .\/?%&=]*)?/;

      if (reg.test(url)) {

        if(url.indexOf("://") < 0){

          url = "http://" + url

        }

        $("#imgtab3_error").html("");

        $("#img_upload").modal('hide');

        editor.replaceSelection('![' + url + '](' + url + ')');

        var head = editor.getCursor("head");

        editor.setSelection(head, head);

        editor.focus();

      }else{

        $("#imgtab3_error").html("链接格式不正确");

      }

    }

    

    $('.addMedia').click(function() {

        var src = $('.modal input[name="url"]').val();

        var alt = $('.modal input[name="alt"]').val();

        editor.replaceSelection('![' + alt + '](' + src + ')');

        var head = editor.getCursor("head");

        editor.setSelection(head, head);

        editor.focus();

    });

    

</script>


<!--header-->

<!--nav-->

<!--content-->
<input type="hidden" id="token" value="">
<div class="footer">
<script src="http://csdnimg.cn/pubfooter/js/publib_footer.js"type="text/javascript"></script>
<script src="http://static.blog.csdn.net/scripts/cnick.js?v=1.1"></script>
</div>
<script>

$(document).ready(function(){
    $('.like').click(function(){
        news_id = $(this).parent().parent().attr('id').replace('li_','');
                url = 'http://ptcms.csdn.net/like/like/do_like?jsonpcallback=?';
                $.getJSON(url,
                {'article_id':news_id,'status':1,'domain':'geek.csdn.net'},function(data){
                    if(data.succ > 0){
                        $('#li_'+news_id+' .like span').text(data.info.ding);
                        $('#li_'+news_id+' .like').addClass('top_current');
                    }
					if(data.succ == -2){
						alert(data.msg);
						window.location.href='https://passport.csdn.net/account/login';
					}
                    if(data.succ == -1){
                        alert('您已经顶过了');
                    }
        },'json');
    });
    $('.un_like').click(function(){
    	news_id = $(this).parent().parent().attr('id').replace('li_','');
    	token = $('#token').val();
    	$.ajax({
			type:'GET',
			url:'/unlike/do_unlike',
			data:{'news_id':news_id,'token':token,},
			dataType:'json',
			success:function(data){
				if(data.success == 1){
                    var unlike_num = parseInt($('#li_'+news_id+' .un_like span').text());
                    unlike_num = unlike_num+1;
                    

                    var like_num = parseInt($('#li_'+news_id).children().children().children(':first').text());
					if(unlike_num <= like_num){
						$('#li_'+news_id+' .un_like span').text(unlike_num);
					}
					
                   /* if(unlike_num == like_num){
                    	$('#li_'+news_id+' .un_like').addClass('un_like_current');
                    }*/
				}else{
					alert(data.msg);
				}
					
			}
			
        })
    })
});
</script>

<!-- script id="noticeScript" type="text/javascript" charset="utf-8" btnId="header_notice_num" wrapId="note1" count="5" subCount="5" src="http://static.csdn.net/public/common/toolbar/js/notify.js"></script -->
<script id="csdn-toolbar-id" btnId="header_notice_num" wrapId="note1" count="5" subCount="5" type="text/javascript" src="http://static.csdn.net/public/common/toolbar/js/toolbar.js"></script>

</body>
</html>
